# å¼•ç¶™ã0913 - æ˜æ—¥è¡Œã†ã“ã¨ãƒ»ã‚´ãƒ¼ãƒ«ã¾ã§ã®æ®‹ã‚Šã‚¿ã‚¹ã‚¯

## ğŸ“… ç¾åœ¨ã®é€²æ—çŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿ï¼ˆ2025å¹´9æœˆ13æ—¥ï¼‰
- **Week1**: Next.js 15 + Tailwind CSS + shadcn/ui + NextAuth.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Œæˆ
- **Week2**: FastAPI + SQLAlchemy + JWTèªè¨¼ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Œæˆ
- **422ã‚¨ãƒ©ãƒ¼å•é¡Œ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æºå•é¡Œã‚’è§£æ±º
- **UI/UXæ”¹å–„**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®è¦‹ãŸç›®ã‚’ã€Œä¼šç¤¾AWS publicã€ãƒ¬ãƒ™ãƒ«ã«å‘ä¸Š
- **AWS Amplify ãƒ‡ãƒ—ãƒ­ã‚¤**: Next.js 15ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ

### ğŸ¯ ç¾åœ¨ã®çŠ¶æ…‹
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: AWS Amplify ã§æœ¬ç•ªç¨¼åƒä¸­ âœ…
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®ã¿ï¼ˆæœªãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
- **èªè¨¼**: NextAuth.js + JWT ã§å‹•ä½œç¢ºèªæ¸ˆã¿
- **RAGæ©Ÿèƒ½**: æœªå®Ÿè£…ï¼ˆDay9-10ã§äºˆå®šï¼‰

---

## ğŸš€ æ˜æ—¥ï¼ˆDay12ï¼‰ã®ä½œæ¥­å†…å®¹

### ç›®æ¨™
**ECRÃ—2ãƒªãƒã‚¸ãƒˆãƒª + CodeBuildè¨­å®šï¼ˆui/apiï¼‰**

### å…·ä½“çš„ãªã‚¿ã‚¹ã‚¯

#### 1. ECRãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ
```bash
# UIç”¨ãƒªãƒã‚¸ãƒˆãƒª
aws ecr create-repository --repository-name vendor0913-ui --region ap-northeast-1

# APIç”¨ãƒªãƒã‚¸ãƒˆãƒª  
aws ecr create-repository --repository-name vendor0913-api --region ap-northeast-1
```

#### 2. Dockerfileã®ä½œæˆ
**`backend/Dockerfile`**:
```dockerfile
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
EXPOSE 8000

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
```

**`frontend/Dockerfile`**:
```dockerfile
FROM node:20-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/.next /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

#### 3. CodeBuildãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š
**`buildspec-ui.yml`**:
```yaml
version: 0.2
phases:
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...
      - docker build -t $IMAGE_REPO_NAME:$IMAGE_TAG .
      - docker tag $IMAGE_REPO_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
artifacts:
  files:
    - '**/*'
```

**`buildspec-api.yml`**:
```yaml
version: 0.2
phases:
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...
      - docker build -t $IMAGE_REPO_NAME:$IMAGE_TAG .
      - docker tag $IMAGE_REPO_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
artifacts:
  files:
    - '**/*'
```

#### 4. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
**CodeBuildç’°å¢ƒå¤‰æ•°**:
- `AWS_ACCOUNT_ID`: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID
- `AWS_DEFAULT_REGION`: ap-northeast-1
- `IMAGE_REPO_NAME`: vendor0913-ui / vendor0913-api
- `IMAGE_TAG`: latest

---

## ğŸ“‹ æ®‹ã‚Šã®ã‚¿ã‚¹ã‚¯ï¼ˆDay13-20ï¼‰

### Day13: ECS Fargate ã§APIã‚µãƒ¼ãƒ“ã‚¹å¸¸é§åŒ–
- ECSã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä½œæˆ
- ã‚¿ã‚¹ã‚¯å®šç¾©ä½œæˆï¼ˆFastAPIç”¨ï¼‰
- ã‚µãƒ¼ãƒ“ã‚¹ä½œæˆãƒ»èµ·å‹•
- CloudWatch Logsè¨­å®š

### Day14: ALB+HTTPS ã§å…¬é–‹å£æ•´å‚™
- Application Load Balancerä½œæˆ
- ACMè¨¼æ˜æ›¸è¨­å®š
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š

### Day15: RDS PostgreSQL + pgvectorç§»è¡Œ
- RDS PostgreSQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
- pgvectoræ‹¡å¼µã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œ
- æ¥ç¶šè¨­å®šæ›´æ–°

### Day16: S3 ingest API
- S3ãƒã‚±ãƒƒãƒˆä½œæˆ
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- æ–‡æ›¸åˆ†å‰²ãƒ»åŸ‹ã‚è¾¼ã¿å‡¦ç†
- pgvectorä¿å­˜æ©Ÿèƒ½

### Day17: Secretsç®¡ç†ãƒ»è¨­å®šå¤–å‡ºã—
- AWS Secrets Managerè¨­å®š
- ç’°å¢ƒå¤‰æ•°ã®å¤–å‡ºã—
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

### Day18: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»ç›£è¦–
- WAFè¨­å®š
- CloudWatchç›£è¦–è¨­å®š
- ã‚¢ãƒ©ãƒ¼ãƒ è¨­å®š

### Day19: CI/CD & Blue/Green
- CodePipelineè¨­å®š
- è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
- Blue/Greenãƒ‡ãƒ—ãƒ­ã‚¤

### Day20: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»HTTPS & Runbook
- Route53è¨­å®š
- ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
- é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ

---

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 15** (App Router)
- **Tailwind CSS v4**
- **shadcn/ui**
- **NextAuth.js**
- **AWS Amplify Hosting**

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **FastAPI**
- **SQLAlchemy**
- **PostgreSQL + pgvector**
- **JWTèªè¨¼**
- **AWS ECS Fargate**

### ã‚¤ãƒ³ãƒ•ãƒ©
- **AWS ECR** (ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒª)
- **AWS ECS** (ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
- **AWS ALB** (ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼)
- **AWS RDS** (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)
- **AWS S3** (ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸)
- **AWS Secrets Manager** (ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†)

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
vendor0913/
â”œâ”€â”€ frontend/                 # Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ backend/                  # FastAPI ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ database.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docs/                     # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ å¼•ç¶™ã0913.md
â”‚   â”œâ”€â”€ problems-solutions.md
â”‚   â””â”€â”€ å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«0912.md
â”œâ”€â”€ amplify.yml              # Amplifyè¨­å®š
â””â”€â”€ README.md
```

---

## ğŸš¨ æ³¨æ„äº‹é …

### 1. ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†
- æœ¬ç•ªç’°å¢ƒã§ã¯å¿…ãšAWS Secrets Managerã‚’ä½¿ç”¨
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯`.gitignore`ã«è¿½åŠ æ¸ˆã¿

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ALBçµŒç”±ã§ã®ã¿APIã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- ç›´æ¥ECSã‚¿ã‚¹ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ä¸å¯
- WAFã§ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹é˜²æ­¢

### 3. ã‚³ã‚¹ãƒˆç®¡ç†
- Fargateã¯ä½¿ç”¨æ™‚é–“èª²é‡‘
- RDSã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹èª²é‡‘
- ä¸è¦ãªãƒªã‚½ãƒ¼ã‚¹ã¯å®šæœŸçš„ã«ç¢ºèª

---

## ğŸ“ ç·Šæ€¥æ™‚ã®é€£çµ¡å…ˆ

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¬ä»»è€…**: Takuya Suehiro
- **æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ**: AWS Support
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `docs/`ãƒ•ã‚©ãƒ«ãƒ€å†…

---

**ä½œæˆæ—¥**: 2025å¹´9æœˆ13æ—¥  
**æ›´æ–°æ—¥**: 2025å¹´9æœˆ13æ—¥  
**æ¬¡å›æ›´æ–°äºˆå®š**: Day12å®Œäº†å¾Œ

